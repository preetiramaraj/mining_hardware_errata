from gensim.models.word2vec import Word2Vec
import matplotlib.pyplot as plt
from sklearn.manifold import TSNE
import numpy as np

model = Word2Vec.load('Failure_workaround.model')


#keywords = [u'clock',u'flash',u'dma',u'sdram',u'cache',u'parity',u'state',u'set',u'register',u'interrupt',u'interrupts',u'mode',u'reset',u'nxp',u'ti',u'st']
# Top 200
#keywords = ['register', 'bit', '=', 'channel', 'set', 'mode', 'clock', '1', 'are', 'can', 'will', 'by', 'from', 'reset', 'read', 'that', '0', 'must', 'it', 'status', 'does', 'chip', 'interrupt', 'after', 'silicon', 'during', 'drdy', 'adc:', 'same', 'conversion', 'value', 'has', 'software', 'may', 'only', '1.', 'bits', 'one', 'should', 'end', 'before', 'transfer', 'external', 'master', 'than', 'use', 'none.', 'govre', 'device', 'line', 'flag', 'select', 'write', 'spi:', 'start', 'controller', 'two', 'behavior', '2', 'there', 'reading', 'revision', 'then', 'no', 'time', 'output', 'do', 'first', 'memory', 'all', 'following', 'system', 'low', 'signal', 'used', 'update', 'but', 'state', 'pwm:', 'counter', 'dma', 'possible', 'frequency', 'functional', 'while', 'cycle', 'period', 'disabling', 'high', 'flash', 'between', '[datasheet]', 'register.', 'usage', 'been', 'notes','sam7s', 'access', 'cpu', 'current', 'which', 'cache', 'series', 'known', 'slave', 'leakage', 'input', 'l2', 'any', 'design', 'spi', 'using', 'error', 'wait', 'hardware', 'active', 'event', 'timer', 'mode.', 'being', 'into', 'buffer', 'exceptions', 'v', '2.', 'adc', 'specifications', 'pin', '-', 'cdr', 'configured', 'mode,', 'voltage', 'sdram', 'disable', 'serial', 'disabled', 'usart:', 'condition', 'l1d', 'boot', 'maximum', 'cleared', 'programmed', 'revisions', 'instant', 'instead', 'documentation', 'user', 'new', 'none', 'have', 'power', 'equal', 'edge', 'also', 'control', '1,', 'ddr', 'code', 'number', 'transmitter', 'other', 'feedback', 'match', 'revised', 'submit', 'up', '2014', 'june', 'twi:', 'internal', 'receive', 'processor', 'i/o', '.', 'usb', 'eoc', 'active,', 'pa0-pa16', 'field', 'figure', 'aligned', 'bus', 'interrupts', 'enable', 'occurs', 'bad', 'scbr', 'nor', 'limitations', 'sleep', 'pdc', 'set.', 'performed', 'issue', 'reset.', 'already', 'pulse', 'sdma', 'writing', 'frame', 'supply', 'ssc:', 'selected', '1.0', 'enabled', '4', '3', 'watchdog', '2011', '*/', '/*', 'www.ti.com', 'equals', 'rev.', 'generated', 'peripheral', 'pio:', 'fixed', 'setting', 'nrst', '1.1', 'rx', 'address', 'receiver', '2.0,', 'case', 'sent', 'cts', '2.1,', 'second', 'more', 'load', 'written', 'pins', 'through', 'example,', 'rise', 'updated', '25', 'incorporated', 'character', 'handshaking', 'command', 'pll', 'host', 'ram', 'baudrate', 'burst', 'march', 'neither', 'b', 'multiple', 'table', 'mhz', 'i', 'dcd', 'last', 'clear', 'additional', 'interface', 'transmit', 'where', 'timing', 'due', 'spck', 'instruments', 'registers', 'copyright']

# Top 500
#keywords=['x', 'data', 'bit', 'register', 'mode', 'channel', 'set', 'clock', 'spi', 'adc', 'reset', 'pa', 'l', 'read', 'pwm', 'lpc', 'bits', 'conversion', 'must', 'chip', 'interrupt', 'v', 'status', 'c', 'drdy', 'transfer', 'silicon', 'write', 'software', 'value', 'time', 'may', 'device', 'one', 'd', 'memory', 'line', 'start', 'end', 'active', 'external', 'twi', 'use', 'master', 'flag', 'govre', 'none.', 'low', 'two', 'select', 'm', 'output', 'controller', 'behavior', 'state', 'sam', 'cpu', 'frequency', 'reading', 'power', 'revision', 'input', 'possible', 'following', 'first', 'usb', 'system', 'used', 'high', 'eoc', 'dma', 'sr', 'flash', 'datasheet', 'signal', 'cycle', 'counter', 'cache', 'y', 'update', 'sdma', 'timer', 'es', 'usart', 'emc', 'rtt', 'instead', 'functional', 'period', 'access', 'atarm', 'disabling', 'register.', 'notes', 'usage', 'boot', 'slave', 'pin', 'current', 'disabled', 'event', 'arm', 'series', 'using', 'voltage', 'enabled', 'design', 'wait', 'known', 'error', 'leakage', 'f', 'mhz', 'hardware', 'field', 'mode.', 'ddr', 'dsp', 'condition', 'occurs', 'buffer', 'match', 'example', 'dvdd', 'exceptions', 'sdram', 'user', 'performed', 'b', 'o', 'p', 'disable', 'oct', 'specifications', 'pdc', 'scbr', 'configured', 'pio', 'number', 'cdr', 'ssc', 'edge', 'code', 'programmed', 'revisions', 'also', 'serial', 'omap', 'cleared', 'nrst', 'bus', 'interrupts', 'maximum', 'tx', 'last', 'sleep', 'none', 'instant', 'new', 'documentation', 'frame', 'equal', 'control', 'transmitter', 'enable', 'conditions', 'r', 'internal', 'feedback', 'processor', 'rx', 'sprz', 'revised', 'receive', 'submit', 'june', 'case', 'aligned', 'figure', 'issue', 'supply', 'sent', 'bad', 'peripheral', 'burst', 'pull', 'limitations', 'selected', 'receiver', 'reset.', 'set.', 'pulse', 'already', 'load', 'writing', 'note', 'watchdog', 'digital', 'pins', 'fixed', 'baudrate', 'ram', 'equals', 'www.ti.com', 'rev.', 'rise', 'address', 'generated', 'setting', 'byte', 'workaround', 'clear', 'command', 'idma', 'z', 'cts', 'page', 'second', 'rising', 'csr', 'written', 'instruction', 'host', 'ovre', 'dcd', 'updated', 'character', 'incorporated', 'pll', 'table', 'interface', 'multiple', 'block', 'problem', 'size', 'handshaking', 'level', 'additional', 'correctly', 'transmit', 'march', 'neither', 'single', 'overrun', 'work', 'general', 'csaat', 'registers', 'timing', 'delay', 'due', 'texas', 'spck', 'copyright', 'instruments', 'received', 'less', 'transfers', 'priority', 'duty', 'operation', 'vpull', 'cycles', 'result', 'drive', 'transmission', 'inputs', 'non', 'different', 'temperature', 'section', 'higher', 'lcdr', 'ff', 'see', 'however', 'devices', 'occur', 'nack', 'connected', 'pmc', 'generation', 'loss', 'cannot', 'nand', 'per', 'although', 'another', 'id', 'buff', 'cause', 'recommended', 'trigger', 'txcomp', 'correct', 'operating', 'str', 'g', 'left', 'slow', 'either', 'source', 'chidx', 'sequence', 'least', 'within', 'application', 'cs', 'capture', 'cpol', 'us', 'unit', 'order', 'module', 'asynchronous', 'buffers', 'impact', 'pc', 'function', 'might', 'inactive', 'signals', 'configuration', 'effect', 'device.', 'max', 'take', 'ncpha', 'consumption', 'holding', 'ma', 'method', 'rtc', 'ready', 'required', 'phy', 'hsuart', 'chipintn', 'xoff', 'sram', 'characteristics', 'tk', 'pru', 'lead', 'port', 'running', 'completion', 'activity', 'would', 'abort', 'synchro', 'synchronous', 'valid', 'rate', 'fifo', 'vddio', 'aintc', 'request', 'periods', 'bit.', 'stop', 'ns', 'subsequent', 'empty', 'details', 'perform', 'periodic', 'writes', 'lower', 'values', 'whereas', 'analog', 'converted', 'starting', 'thr', 'e', 'channels', 'programming', 'back', 'expected.', 'i.e.', 'stored', 'successively', 'n', 'leads', 'speed', 'states', 'always', 'cdtyx', 'constraints', 'affected', 'data.', 'characters', 'automatically', 'falling', 'memory.', 'nd', 'bytes', 'link', 'functionality', 'ecc', 'packet', 'clk', 'isr', 'core', 'generate', 'need', 'requests', 'word', 'operate', 'k', 'step', 'selects', 'real', 'erase', 'patch', 'mci', 'vdd', 'transfer.', 'parameter', 'clears', 'lost.', 'logic', 'lost', 'occurring', 'vpbdiv', 'rxbrk', 'edma', 'zero.', 'regulator', 'uint', 'impedance', 'october', 'causes', 'lastxfer', 'gpi', 'flag.', 'go', 'lock', 'correspond', 'dqs', 'change', 'ccntx', 'main', 'electrical', 'around', 'tf', 'cprdx', 'corresponding', 'nvm', 'up.', 'limitation', 'check', 'still', 'without', 'delayed', 'ldr', 'lines', 'center', 'add', 'therefore', 'mck', 'shown', 'switching', 'deep', 'corruption', 'min', 'could', 'megamodule', 'description', 'idle', 'divider', 'impossible', 'probability', 'done', 'level.', 'range', 'way', 'thumb', 'accesses', 'normal', 'transmitting', 'sr.', 'incorrect', 'tc', 'prevent', 'regardless', 'syscfg', 'transition', 'driven', 'complete', 'certain', 'taken', 'soon', 'rhr', 'process', 'enabled.', 'occurs.', 'point']


print len(keywords)
vectors =[model[word] for word in keywords]
tsne = TSNE(n_components=2,random_state=0)
vectors2d = tsne.fit_transform(np.asfarray(vectors, dtype='float'))
for point, word in zip(vectors2d, keywords):
    plt.scatter(point[0], point[1])
    plt.annotate(word,
                 xy = (point[0], point[1]),
                 size='x-large')
plt.show()